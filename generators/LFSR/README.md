# Линейный регистр сдвига обратной связи. 

**Регистр сдвига с линейной обратной связью** (Linear Feedback Shift Register, LFSR) - сдвиговый регистр битовых слов, у которого значение входного бита однозначно задается некоторой функцией, исходя из значений остальных битов регистра до сдвига.
Добавление обратной связи превращает регистр сдвига в генератор псевдослучайных чисел, который находит широкое применение в криптографии.

Значение, подаваемое на вход, считается с помощью булевой линейной функции, представленной ниже, аргументами которой являются сигналы на выходах сдвигового регистра. Факт подачи сигнала с выхода регистра на его вход создает обратную связь.
```
   ┌------┐      ┌------┐            ┌----┐        ┌----┐  Выход
┌-→| Sn-1 |--┬--→| Sn-2 |--┬--→...--→| S1 |--┬----→| S0 |--┬--→
|  └------┘  |a1 └------┘  |a2       └----┘  |an-1 └----┘  |an
|             \             \                 \             \
|            |             |                 |             |
|            ↓             ↓                 ↓             ↓
|           ┌-┐           ┌-┐               ┌-┐           ┌-┐
└-------←---|X|←----------|X|←--...←--------|X|←----------|X|
            └-┘           └-┘               └-┘           └-┘
```
Регистр работает в дискретные
моменты времени, в каждый из которых выполняются такие операции:

1. содержание самой правой ячейки S0 «выталкивается» из регистра и формирует очередной элемент генерированной последовательности;
2. содержание ячейки *S*i перемещается в ячейку *S*i-1, i = 0,1,...,n-1;
3. новое содержание самой левой ячейки – это бит обратной связи, который равен сумме по модулю 2 битов ячеек *S*0,*S*1,...,*S*n-1, умноженных на коэффициенты *a*1,*a*2,...,*a*n

Если некоторые из коэффициентов *a*1,*a*2,...,*a*n равны нулю, то соответствующие сумматоры из цепи обратной связи исключают. В моменты времени *t*=0,1,2,... на выходе регистра генерируется
последовательность x0,x1,x2,...

Пример LFSR длины 4 с коэффициентами *a*1=*a*2=0, *a*3=*a*4=1 и начальным состоянием (*S*0,*S*1,*S*2,*S*3)=(1,0,1,1):
```
   ┌------┐   ┌------┐   ┌----┐      ┌----┐
┌-→| Sn-1 |--→| Sn-2 |--→| S1 |--┬--→| S0 |--┬--→
|  └------┘   └------┘   └----┘  |   └----┘  |
|                                |           |
|                                ↓           |
|                               ┌-┐          |
└-------------------------------|X|←---------┘
                                └-┘
```
|      | S0   | S1   | S2   | S3   | Генерируемые числа |
|:----:|:----:|:----:|:----:|:----:|:------------------:|
| t=0  | 1    | 0    | 1    | 1    | 1                  |
| t=1  | 0    | 1    | 1    | 1    | 0                  |
| t=2  | 1    | 1    | 1    | 1    | 1                  |
| t=3  | 1    | 1    | 1    | 0    | 1                  |
| t=4  | 1    | 1    | 0    | 0    | 1                  |
| t=5  | 1    | 0    | 0    | 0    | 1                  |
| ...  | ...  | ...  | ...  | ...  | ...                |

Генерируется последовательность

1011110001001101